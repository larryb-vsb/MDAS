üîç Pre-Deployment Environment Check
=====================================

‚ö†Ô∏è  /home/runner/workspace/server/storage.ts:
   ‚ö†Ô∏è MEDIUM: Table Import Usage
      Description: Direct usage of imported table constants
      Line 505: usersTable
      Line 506: usersTable
      Line 515: usersTable
      Line 516: usersTable
      Line 538: usersTable
      Line 544: usersTable
      Line 553: usersTable
      Line 555: usersTable
      Line 563: usersTable
      Line 564: usersTable
      Line 570: usersTable
      Line 576: usersTable
      Line 586: usersTable
      Line 588: usersTable
      Line 593: usersTable
      Line 594: usersTable
      Line 683: merchantsTable
      Line 684: usersTable
      Line 686: merchantsTable
      Line 690: usersTable
      Line 707: usersTable
      Line 788: merchantsTable
      Line 815: transactionsTable
      Line 841: merchantsTable
      Line 842: merchantsTable
      Line 904: merchantsTable
      Line 906: merchantsTable
      Line 913: merchantsTable
      Line 915: merchantsTable
      Line 1021: merchantsTable
      Line 1022: merchantsTable
      Line 1026: merchantsTable
      Line 1038: transactionsTable
      Line 1043: transactionsTable
      Line 1069: uploadedFilesTable
      Line 1073: uploadedFilesTable
      Line 1154: merchantsTable
      Line 1155: merchantsTable
      Line 1159: merchantsTable
      Line 1210: merchantsTable
      Line 1212: merchantsTable
      Line 1234: merchantsTable
      Line 1239: merchantsTable
      Line 1297: merchantsTable
      Line 1298: transactionsTable
      Line 1299: auditLogsTable
      Line 1313: merchantsTable
      Line 1320: transactionsTable
      Line 1326: transactionsTable
      Line 1330: merchantsTable
      Line 1358: auditLogsTable
      Line 1383: merchantsTable
      Line 1384: transactionsTable
      Line 1385: auditLogsTable
      Line 1390: merchantsTable
      Line 1409: merchantsTable
      Line 1414: transactionsTable
      Line 1419: transactionsTable
      Line 1427: merchantsTable
      Line 1460: auditLogsTable
      Line 1513: uploadedFilesTable
      Line 1515: uploadedFilesTable
      Line 1540: merchantsTable
      Line 1541: transactionsTable
      Line 1544: merchantsTable
      Line 1582: transactionsTable
      Line 1590: merchantsTable
      Line 1651: transactionsTable
      Line 1652: merchantsTable
      Line 1653: uploadedFilesTable
      Line 1697: transactionsTable
      Line 1698: merchantsTable
      Line 1699: uploadedFilesTable
      Line 1712: transactionsTable
      Line 1713: merchantsTable
      Line 1714: uploadedFilesTable
      Line 1801: transactionsTable
      Line 1802: merchantsTable
      Line 1847: transactionsTable
      Line 1848: merchantsTable
      Line 1904: transactionsTable
      Line 1907: transactionsTable
      Line 1925: transactionsTable
      Line 1926: merchantsTable
      Line 1938: transactionsTable
      Line 1939: merchantsTable
      Line 2019: merchantsTable
      Line 2043: merchantsTable
      Line 2208: merchantsTable
      Line 2211: merchantsTable
      Line 2275: transactionsTable
      Line 2276: merchantsTable
      Line 2282: transactionsTable
      Line 2283: merchantsTable
      Line 2319: transactionsTable
      Line 2323: transactionsTable
      Line 2342: transactionsTable
      Line 2344: transactionsTable
      Line 2391: transactionsTable
      Line 2449: transactionsTable
      Line 2451: transactionsTable
      Line 2588: transactionsTable
      Line 2589: merchantsTable
      Line 2593: transactionsTable
      Line 2600: merchantsTable
      Line 2605: merchantsTable
      Line 2617: merchantsTable
      Line 2650: merchantsTable
      Line 2654: merchantsTable
      Line 2661: merchantsTable
      Line 2665: transactionsTable
      Line 2669: transactionsTable
      Line 2673: transactionsTable
      Line 2718: transactionsTable
      Line 2722: transactionsTable
      Line 2772: uploadedFilesTable
      Line 2797: uploadedFilesTable
      Line 2798: uploadedFilesTable
      Line 2811: uploadedFilesTable
      Line 2847: uploadedFilesTable
      Line 2849: uploadedFilesTable
      Line 2874: uploadedFilesTable
      Line 2925: uploadedFilesTable
      Line 2945: uploadedFilesTable
      Line 2968: uploadedFilesTable
      Line 3038: uploadedFilesTable
      Line 3058: uploadedFilesTable
      Line 3081: uploadedFilesTable
      Line 3118: uploadedFilesTable
      Line 3141: uploadedFilesTable
      Line 3195: uploadedFilesTable
      Line 3238: uploadedFilesTable
      Line 3258: uploadedFilesTable
      Line 3280: uploadedFilesTable
      Line 3323: uploadedFilesTable
      Line 3344: uploadedFilesTable
      Line 3593: merchantsTable
      Line 3594: merchantsTable
      Line 3634: merchantsTable
      Line 3641: merchantsTable
      Line 3659: merchantsTable
      Line 3661: merchantsTable
      Line 3889: merchantsTable
      Line 3892: merchantsTable
      Line 3909: merchantsTable
      Line 3940: merchantsTable
      Line 3960: merchantsTable
      Line 3967: merchantsTable
      Line 4241: merchantsTable
      Line 4242: merchantsTable
      Line 4386: merchantsTable
      Line 4418: merchantsTable
      Line 4445: transactionsTable
      Line 4468: transactionsTable
      Line 4469: transactionsTable
      Line 4492: transactionsTable
      Line 4498: transactionsTable
      Line 4568: merchantsTable
      Line 4571: merchantsTable
      Line 4579: merchantsTable
      Line 4588: merchantsTable
      Line 4598: merchantsTable
      Line 4624: transactionsTable
      Line 4628: transactionsTable
      Line 4647: transactionsTable
      Line 4650: transactionsTable
      Line 4673: transactionsTable
      Line 4711: transactionsTable
      Line 5057: merchantsTable
      Line 5060: merchantsTable
      Line 5147: merchantsTable
      Line 5150: merchantsTable
      Line 5161: merchantsTable
      Line 5190: merchantsTable
      Line 5239: merchantsTable
      Line 5280: merchantsTable
      Line 5310: merchantsTable
      Line 5313: merchantsTable
      Line 5332: transactionsTable
      Line 5342: transactionsTable
      Line 5376: transactionsTable
      Line 5401: transactionsTable
      Line 5683: terminalsTable
      Line 5686: terminalsTable
      Line 5693: terminalsTable
      Line 5715: terminalsTable
      Line 5769: transactionsTable
      Line 5772: transactionsTable
      Line 5808: merchantsTable
      Line 5811: merchantsTable
      Line 6350: auditLogsTable
      Line 6353: auditLogsTable
      Line 6501: terminalsTable
      Line 6503: terminalsTable
      Line 6510: terminalsTable
      Line 6512: terminalsTable
      Line 6519: terminalsTable
      Line 6521: terminalsTable
      Line 6527: terminalsTable
      Line 6535: terminalsTable
      Line 6537: terminalsTable
      Line 6543: terminalsTable
      Line 6543: terminalsTable
      Line 6647: tddfRecordsTable
      Line 6651: tddfRecordsTable
      Line 6655: tddfRecordsTable
      Line 6662: tddfRecordsTable
      Line 6665: tddfRecordsTable
      Line 6668: tddfRecordsTable
      Line 6671: tddfRecordsTable
      Line 6674: tddfRecordsTable
      Line 6677: tddfRecordsTable
      Line 6680: tddfRecordsTable
      Line 6683: tddfRecordsTable
      Line 6687: tddfRecordsTable
      Line 6691: tddfRecordsTable
      Line 6701: tddfRecordsTable
      Line 6702: tddfRecordsTable
      Line 6703: tddfRecordsTable
      Line 6716: tddfRecordsTable
      Line 6721: tddfRecordsTable
      Line 6748: tddfRecordsTable
      Line 6781: tddfRecordsTable
      Line 6842: tddfRecordsTable
      Line 6845: tddfRecordsTable
      Line 6860: tddfRecordsTable
      Line 6871: tddfRecordsTable
      Line 6959: tddfRecordsTable
      Line 7060: tddfRecordsTable
      Line 7103: tddfRecordsTable
      Line 7166: tddfRecordsTable
      Line 7168: tddfRecordsTable
      Line 7176: tddfRecordsTable
      Line 7217: tddfRecordsTable
      Line 7225: tddfRecordsTable
      Line 7249: tddfRecordsTable
      Line 7282: tddfRecordsTable
      Line 7284: tddfRecordsTable
      Line 7293: tddfRecordsTable
      Line 7331: tddfRecordsTable
      Line 7333: tddfRecordsTable
      Line 7345: tddfRecordsTable
      Line 7496: tddfRecordsTable
      Line 7497: tddfRecordsTable
      Line 9052: tddfRecordsTable
      Line 9087: tddfRecordsTable
      Line 9106: tddfRecordsTable
      Line 9119: tddfRecordsTable
      Line 9146: tddfRecordsTable
      Line 12145: tddfRecordsTable
      Line 12182: tddfRecordsTable
      Line 12327: merchantsTable
      Line 12334: merchantsTable
      Line 12368: merchantsTable
   ‚ö†Ô∏è MEDIUM: Missing getTableName Usage
      Description: Database operations that might need environment awareness
      Line 610: db.select().from(
      Line 614: db.select().from(
      Line 619: db.select().from(
      Line 648: db.select().from(
      Line 12474: db.select().from(
      Line 12478: db.select().from(

‚ö†Ô∏è  /home/runner/workspace/server/routes.ts:
   üö® HIGH: Drizzle ORM Hardcoded Tables
      Description: Direct table imports from schema used in queries
      Line 1531: .from(transactionsTable
      Line 1540: .from(merchantsTable
      Line 3629: .from(merchantsTable
      Line 3648: .from(auditLogsTable
      Line 3725: .from(systemLogsTable
      Line 5306: .from(tddfRecordsTable
      Line 5502: .from(tddfRecordsTable
      Line 5546: .from(tddfRecordsTable
      Line 6229: .from(tddfRecordsTable
      Line 6260: .from(tddfRecordsTable
   üö® HIGH: Raw SQL Without Template Variables
      Description: Raw SQL queries without environment-aware table names
      Line 2833: FROM uploaded_files 
      Line 3701: FROM uploaded_files 
   ‚ö†Ô∏è MEDIUM: Table Import Usage
      Description: Direct usage of imported table constants
      Line 856: uploadedFilesTable
      Line 857: transactionsTable
      Line 858: tddfRecordsTable
      Line 859: tddfRawImportTable
      Line 861: uploadedFilesTable
      Line 861: transactionsTable
      Line 861: tddfRecordsTable
      Line 874: uploadedFilesTable
      Line 882: transactionsTable
      Line 889: tddfRecordsTable
      Line 900: tddfRecordsTable
      Line 907: tddfRecordsTable
      Line 913: tddfRawImportTable
      Line 920: tddfRawImportTable
      Line 921: tddfRawImportTable
      Line 1106: merchantsTable
      Line 1107: transactionsTable
      Line 1108: uploadedFilesTable
      Line 1529: merchantsTable
      Line 1531: transactionsTable
      Line 1532: transactionsTable
      Line 1532: merchantsTable
      Line 1533: transactionsTable
      Line 1537: merchantsTable
      Line 1540: merchantsTable
      Line 1541: merchantsTable
      Line 1542: merchantsTable
      Line 1803: uploadedFilesTable
      Line 1827: uploadedFilesTable
      Line 1840: uploadedFilesTable
      Line 1873: uploadedFilesTable
      Line 1930: uploadedFilesTable
      Line 1945: uploadedFilesTable
      Line 2010: uploadedFilesTable
      Line 2012: uploadedFilesTable
      Line 2017: uploadedFilesTable
      Line 2044: uploadedFilesTable
      Line 2096: uploadedFilesTable
      Line 2111: uploadedFilesTable
      Line 2238: uploadedFilesTable
      Line 2243: uploadedFilesTable
      Line 3629: merchantsTable
      Line 3629: merchantsTable
      Line 3644: auditLogsTable
      Line 3648: auditLogsTable
      Line 3648: auditLogsTable
      Line 3721: systemLogsTable
      Line 3725: systemLogsTable
      Line 3725: systemLogsTable
      Line 4217: systemLogsTable
      Line 4248: systemLogsTable
      Line 4277: systemLogsTable
      Line 4621: uploadedFilesTable
      Line 4625: uploadedFilesTable
      Line 4669: tddfRecordsTable
      Line 4793: tddfRecordsTable
      Line 4807: uploadedFilesTable
      Line 4858: uploadedFilesTable
      Line 4861: uploadedFilesTable
      Line 4864: uploadedFilesTable
      Line 4896: uploadedFilesTable
      Line 4932: uploadedFilesTable
      Line 5185: tddfRecordsTable
      Line 5194: tddfRecordsTable
      Line 5216: tddfRecordsTable
      Line 5225: tddfRecordsTable
      Line 5306: tddfRecordsTable
      Line 5307: tddfRecordsTable
      Line 5388: tddfRecordsTable
      Line 5389: terminalsTable
      Line 5391: tddfRecordsTable
      Line 5391: terminalsTable
      Line 5404: tddfRecordsTable
      Line 5408: terminalsTable
      Line 5444: tddfRecordsTable
      Line 5459: tddfRecordsTable
      Line 5502: tddfRecordsTable
      Line 5503: tddfRecordsTable
      Line 5504: tddfRecordsTable
      Line 5546: tddfRecordsTable
      Line 5547: tddfRecordsTable
      Line 5548: tddfRecordsTable
      Line 5853: tddfRawImportTable
      Line 6229: tddfRecordsTable
      Line 6230: tddfRecordsTable
      Line 6237: tddfRecordsTable
      Line 6238: tddfRecordsTable
      Line 6260: tddfRecordsTable
      Line 6265: tddfRecordsTable
      Line 6268: tddfRecordsTable
      Line 6271: tddfRecordsTable
      Line 6274: tddfRecordsTable
      Line 6281: tddfRecordsTable
   ‚ö†Ô∏è MEDIUM: Missing getTableName Usage
      Description: Database operations that might need environment awareness
      Line 1264: db.select().from(
      Line 3629: db.select().from(
      Line 3648: db.select().from(
      Line 3725: db.select().from(
      Line 6260: db.select().from(

üìä Summary
===========
Total issues found: 6
High severity issues: 2
Safe environment patterns: 289

üö® DEPLOYMENT BLOCKED
High severity environment issues must be fixed before deployment

Fix checklist:
1. Replace hardcoded table imports with getTableName() calls
2. Add @ENVIRONMENT-CRITICAL tags to environment-sensitive code
3. Add environment logging to database operations
4. Test in both development and production environments
