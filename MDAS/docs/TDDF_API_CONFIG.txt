# TDDF API Configuration for External Testing
# Last Updated: December 4, 2025

## API User Details
User ID: (Create via Admin Panel)
API Key: (Set via TDDF_API_KEY environment variable)
Permissions: tddf:upload
Status: Configured per environment

## Endpoint Information
Production URL: https://mms-vsb.replit.app
Development URL: http://localhost:5000 (local testing only)
Upload Endpoint: /api/tddf/upload
Method: POST
Content-Type: multipart/form-data

## Required Headers
X-API-Key: <YOUR_API_KEY>
X-Requested-With: XMLHttpRequest
Origin: <YOUR_BASE_URL>
Referer: <YOUR_BASE_URL>

## Environment Variable Setup
Before running test scripts, set your API key:

PowerShell:
  $env:TDDF_API_KEY = "your_api_key_here"

Bash:
  export TDDF_API_KEY="your_api_key_here"

## Testing Status
- Local Testing (localhost:5000): CONFIRMED WORKING
- Production Deployment: READY FOR TESTING
- API Key Authentication: VERIFIED FUNCTIONAL  
- Endpoint Implementation: COMPLETE AND OPERATIONAL

## Test Scripts Available

### PowerShell: test-production-tddf.ps1
  - Production upload: .\test-production-tddf.ps1
  - Production ping: .\test-production-tddf.ps1 -PingOnly
  - Local testing: .\test-production-tddf.ps1 -Local
  - Local ping: .\test-production-tddf.ps1 -Local -PingOnly
  - Custom file: .\test-production-tddf.ps1 -FilePath "myfile.TSYSO"
  - Override API key: .\test-production-tddf.ps1 -ApiKey "your_key"

### Bash: test-tddf-api.sh
  - Production upload: ./test-tddf-api.sh
  - Production ping: ./test-tddf-api.sh --ping-only
  - Local testing: ./test-tddf-api.sh --local
  - Local ping: ./test-tddf-api.sh --local --ping-only
  - Custom file: ./test-tddf-api.sh --file myfile.TSYSO
  - Override API key: ./test-tddf-api.sh --api-key "your_key"

## Sample TDDF File Format
File extension: .TSYSO
Content: Fixed-width TDDF records (701 characters per line)
Supported record types: BH (Batch Header), DT (Detail Transaction), A1, A2, P1, P2, DR, CT, LG, FT, F2, CK, AD, G2

## Response Format
Success (200):
{
  "success": true,
  "message": "TDDF file processed successfully",
  "results": {
    "totalLines": 100,
    "dtRecordsCreated": 85,
    "skippedRecords": 15,
    "processingTime": "2.45 seconds"
  }
}

Error responses include detailed error messages and HTTP status codes.

## Notes
- Local testing confirmed working (localhost:5000)
- External URL access requires proper CSRF headers
- API key authentication verified functional
- Processing handles large files with progress tracking
- API keys should be created via Admin Panel and stored securely
